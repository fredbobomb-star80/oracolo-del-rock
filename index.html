<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chiedilo allâ€™Oracolo del Rock â€” risposta casuale</title>

  <style>
    body{
      margin:0;
      background:#0b0b0f;
      color:#eee;
      font-family:system-ui,Arial,sans-serif;
      text-align:center;
    }

    /* CABINA */
    .hero{
      width:100%;
      max-width:980px;
      margin:0 auto;
      position:relative;
      display:flex;
      justify-content:center;
      padding-top:10px;
    }
    .hero-img{
      width:100%;
      height:auto;
      display:block;
    }

    /* --- AREA VIDEO SOVRAPPOSTA --- */
    .yt-overlay{
      position:absolute;

      /* posizione finale */
      left:22%;
      top:66%;
      width:56%;
      height:16%;

      display:flex;
      align-items:center;
      justify-content:center;
    }

    .yt-overlay iframe{
      width:100%;
      height:100%;
      border:3px solid #00c8ff;
      border-radius:14px;
      background:#111;
      opacity:0.75;   /* ðŸ”¥ piÃ¹ trasparente */
      box-shadow:0 0 20px rgba(0,200,255,0.35);
      backdrop-filter: blur(1px);
      animation: destinyPop 420ms ease-out;
    }

    /* Animazione evocazione */
    @keyframes destinyPop {
      0%   { transform: translateY(14px) scale(0.92); opacity:0; filter:blur(6px); }
      60%  { transform: translateY(-3px) scale(1.02); opacity:1; filter:blur(0); }
      100% { transform: translateY(0) scale(1); opacity:1; }
    }

    /* SCRITTA SOTTO IL FRAME MA DENTRO LA CABINA */
    .frame-text{
      position:absolute;
      top:83%;
      left:50%;
      transform:translateX(-50%);
      width:80%;
      font-size:15px;
      color:#f0eaff;
      text-shadow:0 0 6px #ff3ccf;
      opacity:0.95;
      animation: destinyPop 600ms ease-out;
    }

    /* BOTTONE SOTTO LA SCRITTA MA DENTRO LA CABINA */
    .frame-button{
      position:absolute;
      top:90%;   /* leggermente piÃ¹ sotto del testo */
      left:50%;
      transform:translateX(-50%);
    }

    /* STILE BOTTONE */
    #new{
      background:#00c8ff;
      color:#000;
      border:none;
      padding:14px 22px;
      border-radius:999px;
      font-weight:900;
      font-size:15px;
      box-shadow:0 0 15px rgba(0,200,255,.5);
      cursor:pointer;
    }
    #new:hover{
      filter:brightness(1.08);
    }

    /* SOTTO CABINA */
    .wrap{
      max-width:920px;
      margin:0 auto;
      padding:16px 16px 40px;
      margin-top:16px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    /* SOCIAL */
    .social-buttons{
      display:flex;
      justify-content:center;
      gap:12px;
      flex-wrap:wrap;
      margin-top:2px;
    }
    .social-btn{
      text-decoration:none;
      color:#ddd;
      background:#1a1a1a;
      border:2px solid #ff3ccf;
      padding:8px 14px;
      border-radius:999px;
      font-size:14px;
      font-weight:800;
      display:flex;
      align-items:center;
      gap:8px;
      transition:all .2s ease;
      box-shadow:0 0 12px rgba(255,60,207,.25);
    }
    .social-btn:hover{
      transform:scale(1.05);
      color:#fff;
    }
    .social-btn.youtube:hover{ background:#ff0000; border-color:#ff0000; }
    .social-btn.facebook:hover{ background:#1877f2; border-color:#1877f2; }
    .social-btn.instagram:hover{ background:#e4405f; border-color:#e4405f; }

    .note{
      font-size:13px;
      opacity:.7;
    }
  </style>
</head>

<body>

  <!-- CABINA ORACOLO -->
  <header class="hero">

    <img 
      src="https://raw.githubusercontent.com/fredbobomb-star80/oracolo-del-rock/main/214417.png"
      alt="Chiedilo allâ€™Oracolo del Rock"
      class="hero-img"
    />

    <!-- VIDEO -->
    <div id="yt" class="yt-overlay"></div>

    <!-- SCRITTA -->
    <div class="frame-text">
      Pesca una tra le <strong>666 risposte</strong> che gli Dei del Rock hanno in serbo per te.
    </div>

    <!-- BOTTONE -->
    <div class="frame-button">
      <button id="new">ðŸŽ² Nuova risposta</button>
    </div>

  </header>

  <!-- BELOW -->
  <main class="wrap">

    <div class="social-buttons">
      <a href="https://youtube.com/@TUOCANALE" target="_blank" class="social-btn youtube">YouTube</a>
      <a href="https://www.facebook.com/profile.php?id=61583198656003" target="_blank" class="social-btn facebook">Facebook</a>
      <a href="https://www.instagram.com/chiedilo_all_oracolo_del_rock" target="_blank" class="social-btn instagram">Instagram</a>
    </div>

    <p class="note">Da unâ€™idea originale di FredBee â€” tutti i diritti riservati Â©2025</p>

  </main>

  <!-- SCRIPT YOUTUBE -->
  <script>
    const API_KEY     = "AIzaSyDNsQKEvKwHOyZCJ0mojJS325Sbw6wX9as";
    const PLAYLIST_ID = "PL5l5Dspe3Obumt-dqGDVzM4bHp5Qc_vVx";
    const PAGE_SIZE   = 50;

    (function(){
      const s=document.createElement('script');
      s.src="https://www.youtube.com/iframe_api";
      document.head.appendChild(s);
    })();

    let player = null;
    let allIds = [];

    window.onYouTubeIframeAPIReady = () => {
      player = new YT.Player('yt', {
        height: '390',
        width: '640',
        playerVars: { modestbranding:1, rel:0 },
        events: { onReady: onReady }
      });
    };

    function onReady(){
      document.getElementById("new").addEventListener("click", playRandom);
      boot();
    }

    async function boot(){
      try{
        allIds = await fetchAllPlaylistIds(PLAYLIST_ID);
        playRandom();
      }catch(err){
        console.error(err);
        alert("Errore nel caricare la playlist.");
      }
    }

    async function fetchAllPlaylistIds(playlistId){
      let ids = [];
      let pageToken = "";

      do{
        const url = new URL("https://www.googleapis.com/youtube/v3/playlistItems");
        url.searchParams.set("key", API_KEY);
        url.searchParams.set("part", "snippet");
        url.searchParams.set("playlistId", playlistId);
        url.searchParams.set("maxResults", PAGE_SIZE);
        if(pageToken) url.searchParams.set("pageToken", pageToken);

        const res = await fetch(url.toString());
        const data = await res.json();

        const batch = (data.items||[])
          .map(i => i?.snippet?.resourceId?.videoId)
          .filter(Boolean);

        ids.push(...batch);
        pageToken = data.nextPageToken || "";

      } while(pageToken);

      return [...new Set(ids)];
    }

    function playRandom(){
      if(!player || !allIds.length) return;

      const idx = Math.floor(Math.random() * allIds.length);
      const id  = allIds[idx];

      player.loadVideoById(id);
    }
  </script>

</body>
</html>
