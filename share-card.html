<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Carta condivisibile - Oracolo del Rock</title>

  <!-- Font della cabina -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap">

  <style>
    body{
      margin:0;
      padding:0;
      background:#000;
      color:#eee;
      font-family:system-ui,Arial,sans-serif;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
    }

    /* Contenitore esatto 1080x1350 */
    .card-wrapper{
      width:min(90vw, 540px);
      aspect-ratio:1080/1350;
      position:relative;
      overflow:hidden;
      box-shadow:
        0 18px 40px rgba(0,0,0,0.9),
        0 0 20px rgba(0,0,0,0.8);
    }

    .card-wrapper img{
      width:100%;
      height:100%;
      display:block;
      object-fit:cover;
    }

    /* TESTO RISPOSTA — posizione approvata */
    .card-text{
      position:absolute;
      bottom:38%;  /* questa è la posizione che ti andava bene */
      left:50%;
      transform:translateX(-50%);
      width:75%;
      text-align:center;
      font-family:"Great Vibes", cursive;
      font-size:2.1rem;
      line-height:1.25;
      color:#fffdf5;
      text-shadow:
        0 0 6px rgba(0,0,0,0.9),
        0 0 16px rgba(0,0,0,0.85);
    }

    /* NUMERO RISPOSTA — posizione approvata */
    .card-number{
      position:absolute;
      bottom:10%;  
      left:50%;
      transform:translateX(-50%);
      font-size:0.6rem;
      letter-spacing:0.12em;
      text-transform:uppercase;
      color:#f5f5f5;
      text-shadow:
        0 0 4px rgba(0,0,0,0.9),
        0 0 10px rgba(0,0,0,0.8);
      background:rgba(0,0,0,0.45);
      padding:4px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.25);
    }
  </style>
</head>

<body>

  <div class="card-wrapper">
    <img src="card-template.png" alt="Carta Oracolo del Rock">

    <div class="card-text" id="card-text">
      TESTO DI PROVA — SE LO LEGGI, È IL FILE GIUSTO
    </div>

    <div class="card-number" id="card-number">
      RISPOSTA N:000
    </div>
  </div>

  <script>
    // Legge parametri dalla URL: ?text=...&n=...
    const params = new URLSearchParams(window.location.search);

    const rawText = params.get("text");
    const rawNum  = params.get("n");

    const textEl = document.getElementById("card-text");
    const numEl  = document.getElementById("card-number");

    // Inserisce il testo corretto
    if (rawText && textEl){
      const decoded = decodeURIComponent(rawText.replace(/\+/g, " "));
      textEl.textContent = decoded;
    }

    // Inserisce il numero formattato RISPOSTA N:000
    if (rawNum && numEl){
      const n = parseInt(rawNum, 10);
      if (!isNaN(n) && n > 0){
        const padded = String(n).padStart(3, "0");
        numEl.textContent = "RISPOSTA N:" + padded;
      }
    }
  </script>

</body>
</html>
